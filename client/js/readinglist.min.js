(function ( $ ) {
   
$.fn.readingList = function(options) {
  $container = $(this);
  var opts = $.extend( {}, $.fn.readingList.defaults, options ); 
  serialize = function(obj) {
      var str = [];
        for(var p in obj)
        if(obj[p]!=''){
       str.push(encodeURIComponent(p) + "=" + encodeURIComponent(obj[p]));
	}
  return str.join("&");
  }
  url = 'http://proxy.readinglistjs.jshawl.com/?'+serialize(opts);
  $.ajax({
    type:'GET',
    url:url,
    dataType :"jsonp",
    jsonp: false,
    jsonpCallback: "myJsonMethod",
    success: function(res){
      $.each(res.list, function(index, obj){
        $container.append($('<div><h1><a href="'+obj.resolved_url+'" target="_blank">'+obj.resolved_title+'</a></h1><p>'+obj.excerpt+'</p></div>'))
      })
    }
  });
  return this;
};

$.fn.readingList.defaults = {
  count:'5',           // n
  state:'all',         // all || unread || archive
  favorite:1,          // 1 || 0
  tag:'',              // tag_name || _untagged_
  contentType:'',      // article || video || image
  sort:'newest',       // newest || oldest || title || site
  detailType:'simple'  // simple || complete
};

}( jQuery ));
